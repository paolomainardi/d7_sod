#!/usr/bin/env bash
set -e
QUOTEDCMD=()
for token in "$@"; do
  QUOTEDCMD+=($(printf "%q" "$token"))
done
CMD="${QUOTEDCMD[*]}"
if [ -z "$CMD" ]
then
  CMD="bash"
fi
CONTAINER_NAME=$(docker-compose ps 2>/dev/null | grep "drupal_1" | awk '{ print $1 }')
if [ ! -z "${CONTAINER_NAME}" ]
then
  docker exec -i "${CONTAINER_NAME}" /bin/bash -c "${CMD}"
else
  echo "drupal docker application not found."
  exit 1
fi

